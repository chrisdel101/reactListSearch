{"ast":null,"code":"import _defineProperty from \"/Users/chrisdielschnieder/desktop/code_work/hatchways/assessment1/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"/Users/chrisdielschnieder/desktop/code_work/hatchways/assessment1/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/chrisdielschnieder/desktop/code_work/hatchways/assessment1/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/chrisdielschnieder/desktop/code_work/hatchways/assessment1/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/chrisdielschnieder/desktop/code_work/hatchways/assessment1/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/chrisdielschnieder/desktop/code_work/hatchways/assessment1/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/chrisdielschnieder/desktop/code_work/hatchways/assessment1/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/chrisdielschnieder/desktop/code_work/hatchways/assessment1/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/chrisdielschnieder/desktop/code_work/hatchways/assessment1/src/components/List.js\";\nimport React, { Component } from \"react\";\nimport Student from \"./Student\";\nimport Input from \"./Input\";\nimport Fuse from \"fuse.js\";\nimport cloneDeep from \"lodash/cloneDeep\";\nimport isEqual from \"lodash/isEqual\";\nimport Alert from \"./Bootstrap/Alert\";\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n    _this.state = {\n      tags: {},\n      tagsKeys: {},\n      alertShow: false,\n      studentsObj: {},\n      studentsObjCopy: {},\n      studentsObjCopywTags: {},\n      text: \"\"\n    };\n    _this.handleKeyup = _this.handleKeyup.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleTags = _this.handleTags.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleClick = _this.handleClick.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  } //  e has two inputs - e.event and e.id\n\n\n  _createClass(App, [{\n    key: \"handleClick\",\n    value: function handleClick(e) {\n      if (!e.event && e.target) {\n        if (e.target.type === \"button\" && e.target.classList.contains(\"close\")) {\n          this.setState({\n            alertShow: false\n          });\n        } // remove tag\n\n      } else if (e.event && e.event.target.classList.contains(\"fa-times\")) {\n        this.removeTag(e.event, e.id); // remove student\n      }\n\n      if (e.event && e.event.target.classList.contains(\"fa-trash\")) {\n        this.removeStudent(e.id);\n      }\n    }\n  }, {\n    key: \"handleKeyup\",\n    value: function handleKeyup(e) {\n      var _this2 = this;\n\n      var that = this;\n      var value = e.target.value; // handle a cleared name search bar\n\n      if (e.target.value === \"\" && e.target.classList.contains(\"search-name\")) {\n        resetNameSearch();\n        this.setState({\n          alertShow: false\n        });\n        return; //handle a cleared tag search bar\n      } else if (e.target.value === \"\" && e.target.classList.contains(\"search-tag\")) {\n        this.toggleAlertShow(Object.keys(this.state.studentsObjCopy), \"tag\"); // handle if not tags exists and if tags exist\n\n        if (Object.keys(this.state.studentsObjCopywTags).length) {\n          this.setState({\n            studentsObj: this.state.studentsObjCopywTags\n          });\n        } else if (Object.keys(this.state.studentsObjCopy).length) {\n          this.setState({\n            studentsObj: this.state.studentsObjCopy\n          });\n        } else {\n          console.error(\"An error in the reseting of the tag search occured.\");\n        }\n      } // search names, toggle alert on failure\n\n\n      if (e.target.name === \"search-name\") {\n        resetNameSearch();\n        var result = this.fuseDebounce(value, Object.values(that.state.studentsObj), \"lastName\", \"firstName\");\n        this.toggleAlertShow(result, \"name\");\n        that.setState({\n          studentsArr: result\n        }); // search tags - use tags keys to get all matching students\n      } else if (e.target.name === \"search-tag\") {\n        // all tags with that key\n        var searchResults = this.state.tagsKeys[value]; // if search results return do this\n\n        if (searchResults) {\n          // loop over all tags - keys are the id - get relevant students\n          var _result = Object.keys(searchResults).map(function (id) {\n            return _this2.state.studentsObjCopy[id];\n          });\n\n          this.toggleAlertShow(_result, \"tag\"); // addTags back to filtered students for display\n\n          this.addTags(this.arrToObj(_result), this.state.tags, \"rebuild\"); // display only students with the proper tag\n\n          this.setState({\n            studentsObj: this.arrToObj(_result)\n          }); // if no search results do this - clear out obj show blank screen\n        } else if (e.target.value && !searchResults) {\n          this.toggleAlertShow([], \"tag\");\n          this.setState({\n            studentsObj: {}\n          });\n        }\n      } // remove unrealted search results in name field\n\n\n      function resetNameSearch() {\n        that.setState({\n          studentsObj: that.arrToObj(that.state.studentsArrCopy),\n          studentsArr: that.state.studentsArrCopy\n        });\n      }\n    } // removes students from list and display - NOT FULLY WORKING\n\n  }, {\n    key: \"removeStudent\",\n    value: function removeStudent(id) {\n      var students = cloneDeep(this.state.studentsObj);\n      delete students[id];\n\n      var studentsArrCopy = _toConsumableArray(this.state.studentsArr);\n\n      studentsArrCopy.splice(id, 1);\n      this.setState({\n        studentsObj: students,\n        studentsObjCopy: students,\n        studentsArr: studentsArrCopy,\n        studentsArrCopy: studentsArrCopy\n      });\n    } // set text for seach alert msgs\n\n  }, {\n    key: \"setAlertText\",\n    value: function setAlertText(type) {\n      if (type === \"tag\") {\n        return \"There are no students with those tags.\";\n      } else if (type === \"name\") {\n        return \"There are no students matching that name.\";\n      }\n    } // toggle state in child comp\n\n  }, {\n    key: \"toggleAlertShow\",\n    value: function toggleAlertShow(arr, type) {\n      if (!arr.length) {\n        this.setState({\n          alertShow: true,\n          text: this.setAlertText(type)\n        });\n      } else if (arr.length) {\n        this.setState({\n          alertShow: false,\n          text: this.setAlertText(type)\n        });\n      }\n    } // search and debounce\n\n  }, {\n    key: \"fuseDebounce\",\n    value: function fuseDebounce(searchVal, arr) {\n      var keys;\n\n      if (arguments[2] && arguments[3]) {\n        keys = [arguments[2], arguments[3]];\n      } else if (!arguments[3]) {\n        keys = [arguments[2]];\n      }\n\n      var options = {\n        shouldSort: true,\n        threshold: 0.6,\n        location: 0,\n        distance: 100,\n        maxPatternLength: 32,\n        minMatchCharLength: 1,\n        keys: keys\n      };\n      if (!searchVal) return;\n      var fuse = new Fuse(arr, options); // \"list\" is the item array\n\n      var result = fuse.search(searchVal);\n      return result;\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this3 = this;\n\n      var that = this;\n      fetch(\"https://www.hatchways.io/api/assessment/students\").then(function (res) {\n        return res.json();\n      }).then(function (res) {\n        _this3.setState({\n          studentsArr: res.students,\n          studentsArrCopy: res.students.slice()\n        });\n\n        setTimeout(function () {\n          that.setState({\n            studentsObj: that.arrToObj(that.state.studentsArr),\n            studentsObjCopy: cloneDeep(that.arrToObj(that.state.studentsArr))\n          });\n        }, 100);\n      });\n    } // convert arr to obj for storage\n\n  }, {\n    key: \"arrToObj\",\n    value: function arrToObj(arr) {\n      var obj = {};\n      arr.map(function (item) {\n        return obj[item.id] = item;\n      });\n      return obj;\n    } // gather tags from child\n\n  }, {\n    key: \"handleTags\",\n    value: function handleTags(e) {\n      // copy student obj\n      var that = this; // copy tags object\n\n      var tagsObjCopy = cloneDeep(this.state.tags); // make tags obj\n\n      if (!tagsObjCopy[e.studentId]) {\n        tagsObjCopy[e.studentId] = _defineProperty({}, e.tag.text, e.tag.text);\n      } else if (tagsObjCopy[e.studentId]) {\n        tagsObjCopy[e.studentId][e.tag.text] = e.tag.text;\n      }\n\n      setTimeout(function () {\n        that.addTags(that.state.studentsObjCopy, tagsObjCopy, \"build\");\n      }, 50); // make tagskeys obj\n\n      var tagsKeysObjCopy = cloneDeep(this.state.tagsKeys); // // if no key and no id mathching id inside key\n\n      if (!tagsKeysObjCopy[e.tag.text]) {\n        tagsKeysObjCopy[e.tag.text] = _defineProperty({}, e.studentId, e.tag.text); // else if that tag, but not that id\n      } else if (tagsKeysObjCopy[e.tag.text] && !tagsKeysObjCopy[e.tag.text][e.studentId]) {\n        tagsKeysObjCopy[e.tag.text][e.studentId] = e.tag.text; // don't allow duplicate tags\n      } else if (tagsKeysObjCopy[e.tag.text][e.studentId]) {\n        console.error(\"Cannot add identical tags to one object.\");\n      }\n\n      this.setState({\n        tagsKeys: tagsKeysObjCopy,\n        tags: tagsObjCopy\n      });\n    }\n  }, {\n    key: \"removeTag\",\n    value: function removeTag(e, id) {\n      var tagText = e.target.parentElement.parentElement.innerText; // clone tags objs\n\n      var tagsObjCopy = cloneDeep(this.state.tags);\n      var studentsObjCopy = cloneDeep(this.state.studentsObj);\n      var student = studentsObjCopy[id]; // delete from studentsObj and tags obj\n\n      delete student.tags[tagText];\n      delete tagsObjCopy[id][tagText];\n      this.setState({\n        studentsObj: studentsObjCopy,\n        tags: tagsObjCopy\n      });\n    } // re-build students obj with proper tags included - build from tags obj\n\n  }, {\n    key: \"addTags\",\n    value: function addTags(studentsObj, tagsObj, type) {\n      // settimeouts handle timing errors in displaying data\n      var that = this; // if tag is blank, set to previous obj and return\n\n      if (!Object.keys(tagsObj).length) {\n        setTimeout(function () {\n          that.setState({\n            studentsObj: studentsObj\n          });\n        });\n        return;\n      }\n\n      var studentsObjCopy = cloneDeep(studentsObj); // rebuild students with tags after tag search bar emptied\n\n      Object.keys(tagsObj).forEach(function (tag) {\n        if (!studentsObjCopy[tag]) return;\n\n        if (!studentsObjCopy[tag][\"tags\"]) {\n          studentsObjCopy[tag][\"tags\"] = tagsObj[tag];\n        } else if (studentsObjCopy[tag][\"tags\"]) {\n          studentsObjCopy[tag][\"tags\"][tag] = tag;\n        }\n      }); // reset objWtags only on orignal build\n\n      setTimeout(function () {\n        if (type === \"build\") {\n          that.setState({\n            studentsObj: studentsObjCopy,\n            studentsObjCopywTags: studentsObjCopy\n          });\n        } else if (type === \"rebuild\") {\n          that.setState({\n            studentsObj: studentsObjCopy\n          });\n        }\n      });\n    } // detect changes - use arr in search to get correct order, else obj\n\n  }, {\n    key: \"renderSource\",\n    value: function renderSource() {\n      // TODO NOTE:  //this would be removed in a future iteration of this app\n      var arrs = isEqual(this.state.studentsArr, this.state.studentsArrCopy);\n\n      if (!arrs) {\n        return this.state.studentsArr;\n      } else {\n        return Object.values(this.state.studentsObj);\n      }\n    }\n  }, {\n    key: \"renderStudent\",\n    value: function renderStudent(state) {\n      var _this4 = this;\n\n      if (!state.studentsObj) return;\n      return this.renderSource().map(function (student, i) {\n        return React.createElement(Student, {\n          onKeyUp: _this4.handleTags,\n          firstName: student.firstName,\n          lastName: student.lastName,\n          pic: student.pic,\n          city: student.city,\n          company: student.company,\n          email: student.email,\n          grades: student.grades,\n          id: student.id,\n          skill: student.skill,\n          key: i,\n          tags: student.tags ? student.tags : null,\n          onClick: _this4.handleClick,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 307\n          },\n          __self: this\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"list-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 328\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"List\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 329\n        },\n        __self: this\n      }, React.createElement(Input, {\n        onKeyUp: this.handleKeyup,\n        instance: \"search-name\",\n        placeholder: \"Search by name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 330\n        },\n        __self: this\n      }), React.createElement(Input, {\n        onKeyUp: this.handleKeyup,\n        instance: \"search-tag\",\n        placeholder: \"Search by tag\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 335\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"students-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 340\n        },\n        __self: this\n      }, this.renderStudent(this.state))), React.createElement(Alert, {\n        variant: \"secondary\",\n        text: this.state.text,\n        show: this.state.alertShow,\n        onClick: this.handleClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 344\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["/Users/chrisdielschnieder/desktop/code_work/hatchways/assessment1/src/components/List.js"],"names":["React","Component","Student","Input","Fuse","cloneDeep","isEqual","Alert","App","props","state","tags","tagsKeys","alertShow","studentsObj","studentsObjCopy","studentsObjCopywTags","text","handleKeyup","bind","handleTags","handleClick","e","event","target","type","classList","contains","setState","removeTag","id","removeStudent","that","value","resetNameSearch","toggleAlertShow","Object","keys","length","console","error","name","result","fuseDebounce","values","studentsArr","searchResults","map","addTags","arrToObj","studentsArrCopy","students","splice","arr","setAlertText","searchVal","arguments","options","shouldSort","threshold","location","distance","maxPatternLength","minMatchCharLength","fuse","search","fetch","then","res","json","slice","setTimeout","obj","item","tagsObjCopy","studentId","tag","tagsKeysObjCopy","tagText","parentElement","innerText","student","tagsObj","forEach","arrs","renderSource","i","firstName","lastName","pic","city","company","email","grades","skill","renderStudent"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\"\nimport Student from \"./Student\"\nimport Input from \"./Input\"\nimport Fuse from \"fuse.js\"\nimport cloneDeep from \"lodash/cloneDeep\"\nimport isEqual from \"lodash/isEqual\"\nimport Alert from \"./Bootstrap/Alert\"\n\nclass App extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      tags: {},\n      tagsKeys: {},\n      alertShow: false,\n      studentsObj: {},\n      studentsObjCopy: {},\n      studentsObjCopywTags: {},\n      text: \"\"\n    }\n    this.handleKeyup = this.handleKeyup.bind(this)\n    this.handleTags = this.handleTags.bind(this)\n    this.handleClick = this.handleClick.bind(this)\n  }\n  //  e has two inputs - e.event and e.id\n  handleClick(e) {\n    if (!e.event && e.target) {\n      if (e.target.type === \"button\" && e.target.classList.contains(\"close\")) {\n        this.setState({\n          alertShow: false\n        })\n      }\n      // remove tag\n    } else if (e.event && e.event.target.classList.contains(\"fa-times\")) {\n      this.removeTag(e.event, e.id)\n      // remove student\n    }\n    if (e.event && e.event.target.classList.contains(\"fa-trash\")) {\n      this.removeStudent(e.id)\n    }\n  }\n  handleKeyup(e) {\n    let that = this\n    let value = e.target.value\n    // handle a cleared name search bar\n    if (e.target.value === \"\" && e.target.classList.contains(\"search-name\")) {\n      resetNameSearch()\n      this.setState({\n        alertShow: false\n      })\n      return\n      //handle a cleared tag search bar\n    } else if (\n      e.target.value === \"\" &&\n      e.target.classList.contains(\"search-tag\")\n    ) {\n      this.toggleAlertShow(Object.keys(this.state.studentsObjCopy), \"tag\")\n      // handle if not tags exists and if tags exist\n      if (Object.keys(this.state.studentsObjCopywTags).length) {\n        this.setState({\n          studentsObj: this.state.studentsObjCopywTags\n        })\n      } else if (Object.keys(this.state.studentsObjCopy).length) {\n        this.setState({\n          studentsObj: this.state.studentsObjCopy\n        })\n      } else {\n        console.error(\"An error in the reseting of the tag search occured.\")\n      }\n    }\n    // search names, toggle alert on failure\n    if (e.target.name === \"search-name\") {\n      resetNameSearch()\n      let result = this.fuseDebounce(\n        value,\n        Object.values(that.state.studentsObj),\n        \"lastName\",\n        \"firstName\"\n      )\n      this.toggleAlertShow(result, \"name\")\n      that.setState({\n        studentsArr: result\n      })\n      // search tags - use tags keys to get all matching students\n    } else if (e.target.name === \"search-tag\") {\n      // all tags with that key\n      let searchResults = this.state.tagsKeys[value]\n      // if search results return do this\n      if (searchResults) {\n        // loop over all tags - keys are the id - get relevant students\n        let result = Object.keys(searchResults).map(id => {\n          return this.state.studentsObjCopy[id]\n        })\n        this.toggleAlertShow(result, \"tag\")\n        // addTags back to filtered students for display\n        this.addTags(this.arrToObj(result), this.state.tags, \"rebuild\")\n        // display only students with the proper tag\n        this.setState({\n          studentsObj: this.arrToObj(result)\n        })\n\n        // if no search results do this - clear out obj show blank screen\n      } else if (e.target.value && !searchResults) {\n        this.toggleAlertShow([], \"tag\")\n        this.setState({ studentsObj: {} })\n      }\n    }\n    // remove unrealted search results in name field\n    function resetNameSearch() {\n      that.setState({\n        studentsObj: that.arrToObj(that.state.studentsArrCopy),\n        studentsArr: that.state.studentsArrCopy\n      })\n    }\n  }\n  // removes students from list and display - NOT FULLY WORKING\n  removeStudent(id) {\n    let students = cloneDeep(this.state.studentsObj)\n    delete students[id]\n    let studentsArrCopy = [...this.state.studentsArr]\n    studentsArrCopy.splice(id, 1)\n    this.setState({\n      studentsObj: students,\n      studentsObjCopy: students,\n      studentsArr: studentsArrCopy,\n      studentsArrCopy: studentsArrCopy\n    })\n  }\n  // set text for seach alert msgs\n  setAlertText(type) {\n    if (type === \"tag\") {\n      return \"There are no students with those tags.\"\n    } else if (type === \"name\") {\n      return \"There are no students matching that name.\"\n    }\n  }\n  // toggle state in child comp\n  toggleAlertShow(arr, type) {\n    if (!arr.length) {\n      this.setState({\n        alertShow: true,\n        text: this.setAlertText(type)\n      })\n    } else if (arr.length) {\n      this.setState({\n        alertShow: false,\n        text: this.setAlertText(type)\n      })\n    }\n  }\n  // search and debounce\n  fuseDebounce(searchVal, arr) {\n    let keys\n    if (arguments[2] && arguments[3]) {\n      keys = [arguments[2], arguments[3]]\n    } else if (!arguments[3]) {\n      keys = [arguments[2]]\n    }\n    var options = {\n      shouldSort: true,\n      threshold: 0.6,\n      location: 0,\n      distance: 100,\n      maxPatternLength: 32,\n      minMatchCharLength: 1,\n      keys: keys\n    }\n    if (!searchVal) return\n    var fuse = new Fuse(arr, options) // \"list\" is the item array\n    var result = fuse.search(searchVal)\n    return result\n  }\n  componentDidMount() {\n    let that = this\n    fetch(\"https://www.hatchways.io/api/assessment/students\")\n      .then(res => res.json())\n      .then(res => {\n        this.setState({\n          studentsArr: res.students,\n          studentsArrCopy: res.students.slice()\n        })\n        setTimeout(function() {\n          that.setState({\n            studentsObj: that.arrToObj(that.state.studentsArr),\n            studentsObjCopy: cloneDeep(that.arrToObj(that.state.studentsArr))\n          })\n        }, 100)\n      })\n  }\n  // convert arr to obj for storage\n  arrToObj(arr) {\n    let obj = {}\n    arr.map(item => {\n      return (obj[item.id] = item)\n    })\n    return obj\n  }\n  // gather tags from child\n  handleTags(e) {\n    // copy student obj\n    let that = this\n\n    // copy tags object\n    let tagsObjCopy = cloneDeep(this.state.tags)\n    // make tags obj\n    if (!tagsObjCopy[e.studentId]) {\n      tagsObjCopy[e.studentId] = {\n        [e.tag.text]: e.tag.text\n      }\n    } else if (tagsObjCopy[e.studentId]) {\n      tagsObjCopy[e.studentId][e.tag.text] = e.tag.text\n    }\n\n    setTimeout(function() {\n      that.addTags(that.state.studentsObjCopy, tagsObjCopy, \"build\")\n    }, 50)\n\n    // make tagskeys obj\n    let tagsKeysObjCopy = cloneDeep(this.state.tagsKeys)\n    // // if no key and no id mathching id inside key\n    if (!tagsKeysObjCopy[e.tag.text]) {\n      tagsKeysObjCopy[e.tag.text] = {\n        [e.studentId]: e.tag.text\n      }\n      // else if that tag, but not that id\n    } else if (\n      tagsKeysObjCopy[e.tag.text] &&\n      !tagsKeysObjCopy[e.tag.text][e.studentId]\n    ) {\n      tagsKeysObjCopy[e.tag.text][e.studentId] = e.tag.text\n      // don't allow duplicate tags\n    } else if (tagsKeysObjCopy[e.tag.text][e.studentId]) {\n      console.error(\"Cannot add identical tags to one object.\")\n    }\n    this.setState({\n      tagsKeys: tagsKeysObjCopy,\n      tags: tagsObjCopy\n    })\n  }\n  removeTag(e, id) {\n    let tagText = e.target.parentElement.parentElement.innerText\n    // clone tags objs\n    let tagsObjCopy = cloneDeep(this.state.tags)\n    let studentsObjCopy = cloneDeep(this.state.studentsObj)\n    let student = studentsObjCopy[id]\n    // delete from studentsObj and tags obj\n    delete student.tags[tagText]\n    delete tagsObjCopy[id][tagText]\n\n    this.setState({\n      studentsObj: studentsObjCopy,\n      tags: tagsObjCopy\n    })\n  }\n  // re-build students obj with proper tags included - build from tags obj\n  addTags(studentsObj, tagsObj, type) {\n    // settimeouts handle timing errors in displaying data\n    let that = this\n    // if tag is blank, set to previous obj and return\n    if (!Object.keys(tagsObj).length) {\n      setTimeout(function() {\n        that.setState({\n          studentsObj: studentsObj\n        })\n      })\n      return\n    }\n\n    let studentsObjCopy = cloneDeep(studentsObj)\n    // rebuild students with tags after tag search bar emptied\n    Object.keys(tagsObj).forEach(tag => {\n      if (!studentsObjCopy[tag]) return\n      if (!studentsObjCopy[tag][\"tags\"]) {\n        studentsObjCopy[tag][\"tags\"] = tagsObj[tag]\n      } else if (studentsObjCopy[tag][\"tags\"]) {\n        studentsObjCopy[tag][\"tags\"][tag] = tag\n      }\n    })\n    // reset objWtags only on orignal build\n    setTimeout(function() {\n      if (type === \"build\") {\n        that.setState({\n          studentsObj: studentsObjCopy,\n          studentsObjCopywTags: studentsObjCopy\n        })\n      } else if (type === \"rebuild\") {\n        that.setState({\n          studentsObj: studentsObjCopy\n        })\n      }\n    })\n  }\n  // detect changes - use arr in search to get correct order, else obj\n  renderSource() {\n    // TODO NOTE:  //this would be removed in a future iteration of this app\n    const arrs = isEqual(this.state.studentsArr, this.state.studentsArrCopy)\n    if (!arrs) {\n      return this.state.studentsArr\n    } else {\n      return Object.values(this.state.studentsObj)\n    }\n  }\n  renderStudent(state) {\n    if (!state.studentsObj) return\n    return this.renderSource().map((student, i) => {\n      return (\n        <Student\n          onKeyUp={this.handleTags}\n          firstName={student.firstName}\n          lastName={student.lastName}\n          pic={student.pic}\n          city={student.city}\n          company={student.company}\n          email={student.email}\n          grades={student.grades}\n          id={student.id}\n          skill={student.skill}\n          key={i}\n          tags={student.tags ? student.tags : null}\n          onClick={this.handleClick}\n        />\n      )\n    })\n  }\n\n  render() {\n    return (\n      <div className=\"list-container\">\n        <div className=\"List\">\n          <Input\n            onKeyUp={this.handleKeyup}\n            instance=\"search-name\"\n            placeholder=\"Search by name\"\n          />\n          <Input\n            onKeyUp={this.handleKeyup}\n            instance=\"search-tag\"\n            placeholder=\"Search by tag\"\n          />\n          <div className=\"students-container\">\n            {this.renderStudent(this.state)}\n          </div>\n        </div>\n        <Alert\n          variant=\"secondary\"\n          text={this.state.text}\n          show={this.state.alertShow}\n          onClick={this.handleClick}\n        />\n      </div>\n    )\n  }\n}\n\nexport default App\n"]},"metadata":{},"sourceType":"module"}